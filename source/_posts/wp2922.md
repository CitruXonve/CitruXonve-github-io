---
title: 搭载WinPE的U盘分区优化方案
author: Semprathlon / Simfae Dean
tags: []
categories:
  - OS
abbrlink: 52d28112
date: 2017-03-30 22:25:24
---
** 大胆假设，小心求证。 **

众多U盘PE制作工具都采取的套路是：隐性地使用UltraISO单文件版向U盘写入现成的PE镜像。写入后U盘前部将多出一个隐藏小分区存放PE（由于Win只能识别U盘上的首个可见分区）。

问题是：制作完成后的PE相当不透明；制作工具还随意篡改卷标，更引入潜在安全隐患。

为了避免制作工具写U盘镜像的不透明性，现手动操作UltraISO单文件版写入镜像。再使用可靠的分区工具变更分区。

** 操作要点：**

- U盘分区表格式仍使用传统的MBR，以兼容只接受`Legacy`USB设备引导的旧主机。

- 载有PE的分区为激活状态的主分区，FAT32文件系统，移至整个U盘空间后部。

- 使用合适的分区工具（如Paragon Hard Disk Manager）在前部建立日常存放数据分区，非激活状态的主分区。

经测试，能够在Win下成功挂载、分配盘符，读写数据分区。也可利用`BOOTICEx64`来回切换可见分区，而无需刻意隐藏分区。

在Win8PE下甚至实现了同时挂载数据分区与PE分区。